{
  "name": "GiggleGPTBot V2",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "*"
        ],
        "additionalFields": {}
      },
      "id": "58065345-2b78-46c4-8c51-584fba2acf14",
      "name": "Webhook Telegram",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1,
      "position": [
        -1536,
        224
      ],
      "webhookId": "9bbd84b8-d350-4684-8239-4e510c90f455",
      "credentials": {
        "telegramApi": {
          "id": "GNUE3W3kc9bGnXyL",
          "name": "GiggleGPTBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã\nCREATE TABLE IF NOT EXISTS user_messages (\n  id SERIAL PRIMARY KEY,\n  user_id BIGINT NOT NULL,\n  username VARCHAR(255),\n  first_name VARCHAR(255),\n  chat_id BIGINT NOT NULL,\n  message_text TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS bot_responses (\n  id SERIAL PRIMARY KEY,\n  user_id BIGINT NOT NULL,\n  chat_id BIGINT NOT NULL,\n  user_message TEXT,\n  bot_response TEXT,\n  response_type VARCHAR(50),\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞\nCREATE TABLE IF NOT EXISTS bot_commands (\n  id SERIAL PRIMARY KEY,\n  user_id BIGINT NOT NULL,\n  chat_id BIGINT NOT NULL,\n  command VARCHAR(50) NOT NULL,\n  parameters TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS message_reactions (\n  id SERIAL PRIMARY KEY,\n  message_id BIGINT NOT NULL,\n  chat_id BIGINT NOT NULL,\n  user_id BIGINT NOT NULL,\n  emoji VARCHAR(10),\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS scheduled_posts (\n  id SERIAL PRIMARY KEY,\n  chat_id BIGINT NOT NULL,\n  message_text TEXT,\n  post_type VARCHAR(50),\n  scheduled_time TIME,\n  is_active BOOLEAN DEFAULT true,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE user_stats (\n  user_id BIGINT NOT NULL,\n  chat_id BIGINT NOT NULL,\n  messages_count INT DEFAULT 0,\n  commands_count INT DEFAULT 0,\n  reactions_received INT DEFAULT 0,\n  last_activity TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY (user_id, chat_id)  -- –°–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á\n);\n\n-- –ò–Ω–¥–µ–∫—Å—ã\nCREATE INDEX IF NOT EXISTS idx_user_messages_chat_user ON user_messages(chat_id, user_id);\nCREATE INDEX IF NOT EXISTS idx_bot_responses_chat_user ON bot_responses(chat_id, user_id);\nCREATE INDEX IF NOT EXISTS idx_commands_user ON bot_commands(user_id, command);\nCREATE INDEX IF NOT EXISTS idx_reactions_message ON message_reactions(message_id);\nCREATE INDEX idx_user_stats_activity ON user_stats(last_activity DESC);\nCREATE INDEX idx_user_stats_messages ON user_stats(messages_count DESC);\n",
        "options": {}
      },
      "id": "5a93b7b4-233d-4e7d-b78a-560abbd06c07",
      "name": "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Enhanced –ë–î",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2,
      "position": [
        -1536,
        48
      ],
      "credentials": {
        "postgres": {
          "id": "Fd7RaI9MHHQBq9hE",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO user_messages (user_id, username, first_name, chat_id, message_text) \nVALUES ({{ $('Webhook Telegram').item.json.message.from.id }}, \n        '{{ ($('Webhook Telegram').item.json.message.from.username || '').replace(/'/g, \"''\") }}', \n        '{{ ($('Webhook Telegram').item.json.message.from.first_name || '').replace(/'/g, \"''\") }}', \n        {{ $('Webhook Telegram').item.json.message.chat.id }}, \n        '{{ ($('Webhook Telegram').item.json.message.text || '').replace(/'/g, \"''\") }}');\n\n-- –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–µ–ø–µ—Ä—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º constraint)\nINSERT INTO user_stats (user_id, chat_id, messages_count, last_activity)\nVALUES ({{ $('Webhook Telegram').item.json.message.from.id }}, \n        {{ $('Webhook Telegram').item.json.message.chat.id }}, \n        1, CURRENT_TIMESTAMP)\nON CONFLICT (user_id, chat_id) \nDO UPDATE SET \n  messages_count = user_stats.messages_count + 1,\n  last_activity = CURRENT_TIMESTAMP;",
        "options": {}
      },
      "id": "e5369ae1-6baf-4253-831c-e0034187a833",
      "name": "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2,
      "position": [
        -1280,
        64
      ],
      "credentials": {
        "postgres": {
          "id": "Fd7RaI9MHHQBq9hE",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "condition1",
              "leftValue": "={{ $json.message?.text }}",
              "rightValue": "/",
              "operator": {
                "type": "string",
                "operation": "startsWith",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "fa35a2bc-84d8-49a2-b398-c55abd29a10f",
      "name": "–≠—Ç–æ –∫–æ–º–∞–Ω–¥–∞?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -1104,
        224
      ]
    },
    {
      "parameters": {
        "jsCode": "const telegramData = $('Webhook Telegram').first().json;\nconst messageText = telegramData.message.text;\nconst userId = telegramData.message.from.id;\nconst chatId = telegramData.message.chat.id;\nconst userName = telegramData.message.from.first_name || telegramData.message.from.username;\n\n// –ü–∞—Ä—Å–∏–º –∫–æ–º–∞–Ω–¥—É\nconst commandMatch = messageText.match(/^\\/(\\w+)(?:@\\w+)?(?:\\s+(.*))?/);\nconst command = commandMatch ? commandMatch[1].toLowerCase() : '';\nconst parameters = commandMatch ? (commandMatch[2] || '') : '';\n\n// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∫–æ–º–∞–Ω–¥—ã\nlet commandType = 'unknown';\nlet responseType = 'mixed';\n\nswitch(command) {\n  case 'joke':\n    commandType = 'joke';\n    responseType = 'funny';\n    break;\n  case 'inspire':\n    commandType = 'inspire';\n    responseType = 'inspiring';\n    break;\n  case 'random':\n    commandType = 'random';\n    responseType = 'mixed';\n    break;\n  case 'stats':\n    commandType = 'stats';\n    responseType = 'info';\n    break;\n  case 'top':\n    commandType = 'top';\n    responseType = 'info';\n    break;\n  case 'help':\n    commandType = 'help';\n    responseType = 'info';\n    break;\n  case 'schedule':\n    commandType = 'schedule';\n    responseType = 'admin';\n    break;\n  default:\n    commandType = 'unknown';\n}\n\n// –í—Ä–µ–º—è –¥–Ω—è\nconst now = new Date();\nconst hour = now.getHours();\nlet timeContext = '';\nif (hour < 6) timeContext = '–Ω–æ—á—å';\nelse if (hour < 12) timeContext = '—É—Ç—Ä–æ';\nelse if (hour < 18) timeContext = '–¥–µ–Ω—å';\nelse timeContext = '–≤–µ—á–µ—Ä';\n\nreturn [{\n  json: {\n    userId,\n    userName,\n    chatId,\n    command,\n    commandType,\n    parameters,\n    responseType,\n    timeContext,\n    originalMessage: messageText,\n    chatType: telegramData.message.chat.type\n  }\n}];"
      },
      "id": "122cf278-a356-4e16-90b5-8269b7d8f785",
      "name": "–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -880,
        64
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO bot_commands (user_id, chat_id, command, parameters) \nVALUES ({{ $json.userId }}, {{ $json.chatId }}, '{{ $json.command }}', '{{ $json.parameters.replace(/'/g, \"''\") }}');\n\n-- –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–æ–º–∞–Ω–¥\nUPDATE user_stats \nSET commands_count = commands_count + 1 \nWHERE user_id = {{ $json.userId }} AND chat_id = {{ $json.chatId }};",
        "options": {}
      },
      "id": "1f2c07df-05f2-4e63-ac85-82211e5bfd98",
      "name": "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2,
      "position": [
        -656,
        64
      ],
      "credentials": {
        "postgres": {
          "id": "Fd7RaI9MHHQBq9hE",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT \n  us.user_id,\n  us.messages_count,\n  us.commands_count,\n  0 as reactions_received,\n  us.last_activity,\n  (SELECT COUNT(*) FROM bot_responses br WHERE br.user_id = us.user_id AND br.chat_id = us.chat_id) as responses_count\nFROM user_stats us\nWHERE us.chat_id = {{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.chatId }}\n  AND us.user_id = {{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.userId }}\nLIMIT 1;",
        "options": {}
      },
      "id": "70b030a8-0f10-4d43-99a3-7db7c0e8ee57",
      "name": "–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2,
      "position": [
        -208,
        -368
      ],
      "credentials": {
        "postgres": {
          "id": "Fd7RaI9MHHQBq9hE",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT \n  us.messages_count,\n  us.commands_count,\n  CONCAT(\n    COALESCE((SELECT first_name FROM user_messages WHERE user_id = us.user_id LIMIT 1), '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'),\n    ' (@',\n    COALESCE((SELECT username FROM user_messages WHERE user_id = us.user_id LIMIT 1), 'no_username'),\n    ')'\n  ) as user_name\nFROM user_stats us\nWHERE us.chat_id = {{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.chatId }}\n  AND us.messages_count > 0\nORDER BY (us.messages_count + us.commands_count * 2) DESC\nLIMIT 10;",
        "options": {}
      },
      "id": "d0b2dc76-4643-41b0-a1ae-ca1c6a559015",
      "name": "–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2,
      "position": [
        -208,
        -176
      ],
      "credentials": {
        "postgres": {
          "id": "Fd7RaI9MHHQBq9hE",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ö–û–î –¥–ª—è –Ω–æ–¥—ã \"–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞\"\n\nconst commandData = $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').first().json;\n\n// –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö - –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ\nlet userStatsData = $input.first();\nlet topUsersData = [];\n\ntry {\n  // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–ø–∞\n  const topNode = $('–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π');\n  if (topNode && topNode.all) {\n    topUsersData = topNode.all();\n  }\n} catch (error) {\n  console.log('–¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:', error.message);\n}\n\nlet responseText = '';\n\nswitch(commandData.commandType) {\n  case 'stats':\n    if (userStatsData !== undefined) {\n      const userStats = userStatsData.json;\n      responseText = `üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ${commandData.userName}:\\n` +\n        `üí¨ –°–æ–æ–±—â–µ–Ω–∏–π: ${userStats.messages_count || 0}\\n` +\n        `‚ö° –ö–æ–º–∞–Ω–¥: ${userStats.commands_count || 0}\\n` +\n        `üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: ${userStats.last_activity ? new Date(userStats.last_activity).toLocaleString('ru-RU') : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`;\n    } else {\n      responseText = `üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ${commandData.userName}:\\n` +\n        `–ü–æ–∫–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –æ–±—â–∞—Ç—å—Å—è! üí¨`;\n    }\n    break;\n    \n  case 'top':\n    if (topUsersData.length > 0) {\n      responseText = 'üèÜ –¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:\\n\\n';\n      topUsersData.forEach((user, index) => {\n        const userData = user.json;\n        const total = (userData.messages_count || 0) + (userData.commands_count || 0) * 2;\n        responseText += `${index + 1}. ${userData.user_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}\\n`;\n        responseText += `   üí¨ ${userData.messages_count || 0} —Å–æ–æ–±—â–µ–Ω–∏–π, ‚ö° ${userData.commands_count || 0} –∫–æ–º–∞–Ω–¥\\n`;\n        responseText += `   üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: ${total} –æ—á–∫–æ–≤\\n\\n`;\n      });\n    } else {\n      responseText = 'üèÜ –¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:\\n\\n' +\n        '–ü–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —ç—Ç–æ–º —á–∞—Ç–µ! –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º–∏! üöÄ';\n    }\n    break;\n    \n  case 'help':\n    responseText = 'ü§ñ –ö–æ–º–∞–Ω–¥—ã GiggleGPTBot:\\n\\n' +\n      'üòÑ /joke - —Å–º–µ—à–Ω–∞—è —à—É—Ç–∫–∞\\n' +\n      'üí™ /inspire - –º–æ—Ç–∏–≤–∞—Ü–∏—è\\n' +\n      'üé≤ /random - —Å–ª—É—á–∞–π–Ω–∞—è —Ñ—Ä–∞–∑–∞\\n' +\n      'üìä /stats - —Ç–≤–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\\n' +\n      'üèÜ /top - —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\\n' +\n      '‚ùì /help - —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞\\n\\n' +\n      '–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å @GiggleGPTBot + —Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞!';\n    break;\n    \n  default:\n    responseText = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ ü§î –ò—Å–ø–æ–ª—å–∑—É–π /help –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥.';\n}\n\nreturn [{\n  json: {\n    userId: commandData.userId,\n    userName: commandData.userName,\n    chatId: commandData.chatId,\n    command: commandData.command,\n    commandType: commandData.commandType,\n    responseType: commandData.responseType,\n    timeContext: commandData.timeContext,\n    originalMessage: commandData.originalMessage,\n    chatType: commandData.chatType,\n    responseText: responseText,\n    isInfoCommand: true\n  }\n}];"
      },
      "id": "ace02b27-ee09-4fe2-b55d-ed5cc406e54a",
      "name": "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        32,
        -16
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=–ö–æ–º–∞–Ω–¥–∞: /{{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.command }}\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.userName }}\n–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: {{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.parameters }}\n–¢–∏–ø –æ—Ç–≤–µ—Ç–∞: {{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.responseType }}\n–í—Ä–µ–º—è: {{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.timeContext }}\n\n–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π {{ $json.responseType === 'funny' ? '—Å–º–µ—à–Ω—É—é —à—É—Ç–∫—É' : $json.responseType === 'inspiring' ? '–º–æ—Ç–∏–≤–∏—Ä—É—é—â—É—é —Ñ—Ä–∞–∑—É' : '—Å–ª—É—á–∞–π–Ω—É—é –∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é —Ñ—Ä–∞–∑—É' }} –≤ —Ç–≤–æ–µ–º —Ñ–∏—Ä–º–µ–Ω–Ω–æ–º —Å—Ç–∏–ª–µ —Å —Ç–æ–Ω–∫–∏–º —é–º–æ—Ä–æ–º –∏ –∏–∑—è—â–Ω—ã–º–∏ –ø–æ–¥–∫–æ–ª–∫–∞–º–∏.",
        "options": {
          "systemMessage": "–¢—ã GiggleGPTBot - –æ—Å—Ç—Ä–æ—É–º–Ω—ã–π –±–æ—Ç —Å —Ç–æ–Ω–∫–∏–º —á—É–≤—Å—Ç–≤–æ–º —é–º–æ—Ä–∞ –∏ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ–º –∏–∑—è—â–Ω—ã—Ö –ø–æ–¥–∫–æ–ª–æ–∫.\n\n–û—Ç–≤–µ—á–∞–µ—à—å –Ω–∞ –∫–æ–º–∞–Ω–¥—ã:\n- /joke - —É–º–Ω–∞—è —à—É—Ç–∫–∞ —Å —Ç–æ–Ω–∫–∏–º —é–º–æ—Ä–æ–º\n- /inspire - –º–æ—Ç–∏–≤–∞—Ü–∏—è —Å –ª–µ–≥–∫–æ–π –∏—Ä–æ–Ω–∏–µ–π \n- /random - –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—Å—Ç—Ä–æ—É–º–Ω–∞—è —Ñ—Ä–∞–∑–∞\n\n–°—Ç–∏–ª—å: –∫—Ä–∞—Ç–∫–æ—Å—Ç—å, –∏–∑—è—â–µ—Å—Ç–≤–æ, —É–º–Ω—ã–µ –ø–æ–¥–∫–æ–ª–∫–∏ –±–µ–∑ –≥—Ä—É–±–æ—Å—Ç–∏. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        -320,
        144
      ],
      "id": "1c0b7f91-b147-44a6-b729-3cea5834a8e5",
      "name": "AI –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É"
    },
    {
      "parameters": {
        "model": "openai/gpt-oss-20b:free",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -640,
        832
      ],
      "id": "3a420d16-9611-4761-b41a-97fda73abb56",
      "name": "OpenRouter Commands",
      "credentials": {
        "openRouterApi": {
          "id": "ONSHmBroionT6JFr",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "condition1",
              "leftValue": "={{ $json.isInfoCommand }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equal",
                "singleValue": true
              }
            },
            {
              "id": "78352c71-3779-4ba9-afb7-1e836a019a24",
              "leftValue": "={{ $json.responseText }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "1dbf5bd9-87ee-44dd-bc22-d5649bf85e2a",
      "name": "–¢–∏–ø –æ—Ç–≤–µ—Ç–∞",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        224,
        112
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.responseText }}",
        "additionalFields": {}
      },
      "id": "56b0ee68-7a89-4bb2-844c-25a47356e053",
      "name": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ –æ—Ç–≤–µ—Ç",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        448,
        32
      ],
      "webhookId": "4f20c973-3a64-41ca-9f50-9b9e3c6b13a3",
      "credentials": {
        "telegramApi": {
          "id": "GNUE3W3kc9bGnXyL",
          "name": "GiggleGPTBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.chatId }}",
        "text": "={{ $json.output }}",
        "additionalFields": {}
      },
      "id": "417d0505-e3e1-4feb-ba48-de3ccc1be3d5",
      "name": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å AI –æ—Ç–≤–µ—Ç",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        448,
        224
      ],
      "webhookId": "1ccf329c-ecb1-4f44-b483-e00af8b7a081",
      "credentials": {
        "telegramApi": {
          "id": "GNUE3W3kc9bGnXyL",
          "name": "GiggleGPTBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "condition1",
              "leftValue": "={{ $json.message?.text }}",
              "rightValue": "@GiggleGPTBot",
              "operator": {
                "type": "string",
                "operation": "contains",
                "singleValue": true
              }
            },
            {
              "id": "251b4c51-cdf9-4124-b37b-003eb968a06f",
              "leftValue": "={{ $json.message?.text }}",
              "rightValue": "/",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "bf244b7f-9280-4126-bc37-9696507014db",
      "name": "–£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –±–æ—Ç–∞?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -1104,
        384
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT message_text, username, first_name, created_at \nFROM user_messages \nWHERE chat_id = {{ $('Webhook Telegram').item.json.message.chat.id }} \nORDER BY created_at DESC \nLIMIT 20;",
        "options": {}
      },
      "id": "edb50be1-307b-4ce8-bb57-00651f2d4a11",
      "name": "–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2,
      "position": [
        -880,
        384
      ],
      "credentials": {
        "postgres": {
          "id": "Fd7RaI9MHHQBq9hE",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const telegramData = $('Webhook Telegram').first().json;\nconst chatHistory = $('–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞').all();\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ\nconst userId = telegramData.message.from.id;\nconst userName = telegramData.message.from.first_name || telegramData.message.from.username || '–ê–Ω–æ–Ω–∏–º–Ω—ã–π';\nlet userMessage = telegramData.message.text;\nconst chatId = telegramData.message.chat.id;\n\n// –û—á–∏—â–∞–µ–º –æ—Ç —Ç–µ–≥–∞\nconst originalMessage = userMessage;\nuserMessage = userMessage.replace(/@GiggleGPTBot/gi, '').trim();\nconst isEmptyAfterTag = !userMessage || userMessage.length === 0;\n\n// –ö–æ–Ω—Ç–µ–∫—Å—Ç —á–∞—Ç–∞\nconst recentMessages = chatHistory.map(item => {\n  const msgText = item.json.message_text || '';\n  const author = item.json.first_name || item.json.username || '–ê–Ω–æ–Ω–∏–º–Ω—ã–π';\n  return `${author}: ${msgText}`;\n}).slice(0, 10).join('\\n');\n\n// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø\nlet contentType = 'mixed';\nconst lowerMessage = userMessage.toLowerCase();\nif (lowerMessage.includes('—à—É—Ç–∫') || lowerMessage.includes('—Å–º–µ—à–Ω')) {\n  contentType = 'funny';\n} else if (lowerMessage.includes('–≤–¥–æ—Ö–Ω–æ–≤') || lowerMessage.includes('–º–æ—Ç–∏–≤')) {\n  contentType = 'inspiring';\n}\n\nif (isEmptyAfterTag) {\n  const types = ['funny', 'inspiring', 'mixed'];\n  contentType = types[Math.floor(Math.random() * types.length)];\n}\n\n// –í—Ä–µ–º—è\nconst now = new Date();\nnow.setHours(now.getHours() + 3); // –ø—Ä–∏–±–∞–≤–ª—è–µ–º 3 —á–∞—Å–∞\nconst hour = now.getHours();\nlet timeContext = '';\nif (hour < 6) timeContext = '–Ω–æ—á—å';\nelse if (hour < 12) timeContext = '—É—Ç—Ä–æ';\nelse if (hour < 18) timeContext = '–¥–µ–Ω—å';\nelse timeContext = '–≤–µ—á–µ—Ä';\n\nreturn [{\n  json: {\n    userId,\n    userName,\n    userMessage: isEmptyAfterTag ? '–°–ª—É—á–∞–π–Ω–∞—è —Ñ—Ä–∞–∑–∞' : userMessage,\n    originalMessage,\n    chatId,\n    contentType,\n    timeContext,\n    recentMessages,\n    chatType: telegramData.message.chat.type,\n    isRandomRequest: isEmptyAfterTag\n  }\n}];"
      },
      "id": "f3d8ffb2-c135-4b1e-8bba-e820fce43e9b",
      "name": "–ê–Ω–∞–ª–∏–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -656,
        384
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {{ $json.userName }}\n{{ $json.isRandomRequest ? '–û–±—Ä–∞—Ç–∏–ª—Å—è —Ç–µ–≥–æ–º –±–µ–∑ —Ç–µ–∫—Å—Ç–∞' : '–°–æ–æ–±—â–µ–Ω–∏–µ: \"' + $json.userMessage + '\"' }}\n\n–ö–æ–Ω—Ç–µ–∫—Å—Ç —á–∞—Ç–∞:\n{{ $json.recentMessages }}\n\n–í—Ä–µ–º—è: {{ $json.timeContext }} | –°—Ç–∏–ª—å: {{ $json.contentType }}\n\n{{ $json.isRandomRequest ? '–ü—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π —Å–∏—Ç—É–∞—Ü–∏—é –≤ —á–∞—Ç–µ –æ—Å—Ç—Ä–æ—É–º–Ω–æ.' : '–û—Ç–≤–µ—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–æ–Ω–∫–∏–º —é–º–æ—Ä–æ–º.' }}\n\n–ë—É–¥—å –æ—Å—Ç—Ä–æ—É–º–Ω—ã–º –∏ —Ç–∞–∫—Ç–∏—á–Ω—ã–º! üé≠",
        "options": {
          "systemMessage": "–¢—ã GiggleGPTBot - –æ—Å—Ç—Ä–æ—É–º–Ω—ã–π –±–æ—Ç —Å —Ç–æ–Ω–∫–∏–º —á—É–≤—Å—Ç–≤–æ–º —é–º–æ—Ä–∞ –∏ –∏–∑—è—â–Ω—ã–º–∏ –ø–æ–¥–∫–æ–ª–∫–∞–º–∏.\n\n–°—Ç–∏–ª—å: –∫—Ä–∞—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è), —É–º–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è, –ª–µ–≥–∫–∞—è –∏—Ä–æ–Ω–∏—è, –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Ç—Å—ã–ª–∫–∏.\n\n–ò–∑–±–µ–≥–∞–π: –≥—Ä—É–±–æ—Å—Ç–∏, –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ —Å–∞—Ä–∫–∞–∑–º–∞, –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤.\n\n–ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        -464,
        464
      ],
      "id": "797a7e58-e484-4042-b925-08ccc03bd2d3",
      "name": "AI –æ—Ç–≤–µ—Ç –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ"
    },
    {
      "parameters": {
        "chatId": "={{ $('–ê–Ω–∞–ª–∏–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è').item.json.chatId }}",
        "text": "={{ $json.output }}",
        "additionalFields": {
          "reply_to_message_id": "={{ $('Webhook Telegram').first().json.message.message_id }}"
        }
      },
      "id": "3b5d0fea-5d38-4d5e-a585-d74fb6a4ab33",
      "name": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -80,
        432
      ],
      "webhookId": "03496589-cd63-4249-a5b5-eff8fec21592",
      "credentials": {
        "telegramApi": {
          "id": "GNUE3W3kc9bGnXyL",
          "name": "GiggleGPTBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT chat_id, post_type \nFROM scheduled_posts \nWHERE is_active = true \nAND EXTRACT(HOUR FROM scheduled_time) = EXTRACT(HOUR FROM CURRENT_TIME);",
        "options": {}
      },
      "id": "fd5d8aab-fad8-4898-83d9-37bd19653df3",
      "name": "–ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2,
      "position": [
        -1328,
        624
      ],
      "credentials": {
        "postgres": {
          "id": "Fd7RaI9MHHQBq9hE",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=–¢–∏–ø –ø–æ—Å—Ç–∞: {{ $json.post_type }}\n\n–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π {{ $json.post_type === 'morning_joke' ? '—É—Ç—Ä–µ–Ω–Ω—é—é —à—É—Ç–∫—É' : $json.post_type === 'daily_motivation' ? '–º–æ—Ç–∏–≤–∞—Ü–∏—é –Ω–∞ –¥–µ–Ω—å' : '–∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é —Ñ—Ä–∞–∑—É' }} –≤ —Ç–≤–æ–µ–º —Å—Ç–∏–ª–µ —Å —Ç–æ–Ω–∫–∏–º —é–º–æ—Ä–æ–º.",
        "options": {
          "systemMessage": "–í–ê–ñ–ù–û: –û—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –ø—Ä–æ—Å—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º! \n–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π –∑–≤–µ–∑–¥–æ—á–∫–∏, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –∏–ª–∏ —Å–∏–º–≤–æ–ª—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!\n\n–¢—ã GiggleGPTBot. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—à—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã –¥–ª—è –∫–∞–Ω–∞–ª–æ–≤:\n- morning_joke: —É—Ç—Ä–µ–Ω–Ω–∏–µ —à—É—Ç–∫–∏ —Å –ª–µ–≥–∫–æ–π –∏—Ä–æ–Ω–∏–µ–π\n- daily_motivation: –º–æ—Ç–∏–≤–∞—Ü–∏—è —Å –¥–æ–ª–µ–π —é–º–æ—Ä–∞\n- random_wisdom: –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –æ –∂–∏–∑–Ω–∏\n\n–°—Ç–∏–ª—å: –∫—Ä–∞—Ç–∫–æ—Å—Ç—å, –æ—Å—Ç—Ä–æ—É–º–∏–µ, –ø–æ–∑–∏—Ç–∏–≤ —Å –Ω–æ—Ç–∫–æ–π –∏—Ä–æ–Ω–∏–∏."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        -1104,
        624
      ],
      "id": "c8fc55a5-c357-4421-8601-fa28a69e71f4",
      "name": "AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞"
    },
    {
      "parameters": {
        "chatId": "={{ $('–ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã').item.json.chat_id }}",
        "text": "={{ $json.output }}",
        "additionalFields": {}
      },
      "id": "05c531f3-9b72-4028-822c-08003212f410",
      "name": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Å—Ç",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -784,
        624
      ],
      "webhookId": "4ac5eeba-a239-4d33-979b-c5a9adb33e4e",
      "credentials": {
        "telegramApi": {
          "id": "GNUE3W3kc9bGnXyL",
          "name": "GiggleGPTBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.commandType }}",
                    "rightValue": "stats",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "995c6bf3-f7c9-4589-ba6b-181d8f0339fc"
                  }
                ],
                "combinator": "or"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "adf626b1-fdfc-4ef3-802a-5aabf79694e3",
                    "leftValue": "={{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.commandType }}",
                    "rightValue": "top",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "or"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "5e0f6d12-ca1c-4ab2-bb2e-f7937265274b",
                    "leftValue": "={{ $('–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã').item.json.commandType }}",
                    "rightValue": "help",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "or"
              }
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "id": "849512c4-bfe7-4624-bcb0-8c76b69fb0a3",
      "name": "–†–æ—É—Ç–∏–Ω–≥ –∫–æ–º–∞–Ω–¥",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3,
      "position": [
        -496,
        -160
      ]
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 * * * *"
            }
          ]
        }
      },
      "id": "defd23c5-c0c1-4686-900b-cc21fffdf4f2",
      "name": "–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1,
      "position": [
        -1536,
        624
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO scheduled_posts (chat_id, post_type, scheduled_time) VALUES\n(-1001111111, 'random_wisdom', '16:00:00'),\n(-1002222222, 'daily_news', '09:00:00');",
        "options": {}
      },
      "id": "e1e9f133-b50c-49cb-b9fb-25cf90896926",
      "name": "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2,
      "position": [
        -1536,
        448
      ],
      "credentials": {
        "postgres": {
          "id": "Fd7RaI9MHHQBq9hE",
          "name": "Supabase Postgres"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook Telegram": {
      "main": [
        [
          {
            "node": "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
            "type": "main",
            "index": 0
          },
          {
            "node": "–≠—Ç–æ –∫–æ–º–∞–Ω–¥–∞?",
            "type": "main",
            "index": 0
          },
          {
            "node": "–£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –±–æ—Ç–∞?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–≠—Ç–æ –∫–æ–º–∞–Ω–¥–∞?": {
      "main": [
        [
          {
            "node": "–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã": {
      "main": [
        [
          {
            "node": "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É": {
      "main": [
        [
          {
            "node": "–†–æ—É—Ç–∏–Ω–≥ –∫–æ–º–∞–Ω–¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è": {
      "main": [
        [
          {
            "node": "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π": {
      "main": [
        [
          {
            "node": "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞": {
      "main": [
        [
          {
            "node": "–¢–∏–ø –æ—Ç–≤–µ—Ç–∞",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É": {
      "main": [
        [
          {
            "node": "–¢–∏–ø –æ—Ç–≤–µ—Ç–∞",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–¢–∏–ø –æ—Ç–≤–µ—Ç–∞": {
      "main": [
        [
          {
            "node": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ –æ—Ç–≤–µ—Ç",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å AI –æ—Ç–≤–µ—Ç",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Commands": {
      "ai_languageModel": [
        [
          {
            "node": "AI –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "AI –æ—Ç–≤–µ—Ç –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "–£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –±–æ—Ç–∞?": {
      "main": [
        [
          {
            "node": "–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞": {
      "main": [
        [
          {
            "node": "–ê–Ω–∞–ª–∏–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ê–Ω–∞–ª–∏–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è": {
      "main": [
        [
          {
            "node": "AI –æ—Ç–≤–µ—Ç –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI –æ—Ç–≤–µ—Ç –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ": {
      "main": [
        [
          {
            "node": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã": {
      "main": [
        [
          {
            "node": "AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞": {
      "main": [
        [
          {
            "node": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Å—Ç",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–†–æ—É—Ç–∏–Ω–≥ –∫–æ–º–∞–Ω–¥": {
      "main": [
        [
          {
            "node": "–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AI –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ": {
      "main": [
        [
          {
            "node": "–ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "c0e7fe6e-0aa2-4a45-8cd2-40abcc9f0904",
  "meta": {
    "instanceId": "673dd365761c86615255caaaae908ad0f2b40ed6e6f64e1be5631254544e65ca"
  },
  "id": "jeTfRyDD9h7bZi7X",
  "tags": []
}
